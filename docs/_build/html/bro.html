

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Bayesian Optimization &mdash; bro  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Optimization Objective" href="objective.html" />
    <link rel="prev" title="Bayesian Reaction Optimization" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> bro
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Bayesian Reaction Optimization</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Bayesian Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="objective.html">Optimization Objective</a></li>
<li class="toctree-l2"><a class="reference internal" href="init_scheme.html">Initialization Schemes</a></li>
<li class="toctree-l2"><a class="reference internal" href="models.html">Surrogate Models</a></li>
<li class="toctree-l2"><a class="reference internal" href="acq_func.html">Acquisition Functions</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">bro</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">Bayesian Reaction Optimization</a> &raquo;</li>
        
      <li>Bayesian Optimization</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/bro.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-bro">
<span id="bayesian-optimization"></span><h1>Bayesian Optimization<a class="headerlink" href="#module-bro" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="bro.BO">
<em class="property">class </em><code class="sig-prename descclassname">bro.</code><code class="sig-name descname">BO</code><span class="sig-paren">(</span><em class="sig-param">results_path=None, results=Empty DataFrame Columns: [] Index: [], domain_path=None, domain=Empty DataFrame Columns: [] Index: [], exindex_path=None, exindex=Empty DataFrame Columns: [] Index: [], model=&lt;class 'models.GP_Model'&gt;, acquisition_function='EI', init_method='rand', target=-1, batch_size=5, duplicate_experiments=False, gpu=False, fast_comp=False, noise_constraint=1e-05, matern_nu=2.5, lengthscale_prior=[GammaPrior(), 5.0], outputscale_prior=[GammaPrior(), 8.0], noise_prior=[GammaPrior(), 1.0], computational_objective=None</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO" title="Permalink to this definition">¶</a></dt>
<dd><p>Main method for calling Bayesian optimization algorithm.</p>
<p>Class provides a unified framework for selecting experimental
conditions for the parallel optimization of chemical reactions
and for the simulation of known objectives. The algorithm is
implemented on a user defined grid of domain points and is
flexible to any numerical encoding.</p>
<dl class="method">
<dt id="bro.BO.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param">results_path=None, results=Empty DataFrame Columns: [] Index: [], domain_path=None, domain=Empty DataFrame Columns: [] Index: [], exindex_path=None, exindex=Empty DataFrame Columns: [] Index: [], model=&lt;class 'models.GP_Model'&gt;, acquisition_function='EI', init_method='rand', target=-1, batch_size=5, duplicate_experiments=False, gpu=False, fast_comp=False, noise_constraint=1e-05, matern_nu=2.5, lengthscale_prior=[GammaPrior(), 5.0], outputscale_prior=[GammaPrior(), 8.0], noise_prior=[GammaPrior(), 1.0], computational_objective=None</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Experimental results, experimental domain, and experiment index of
known results can be passed as paths to .csv or .xlsx files or as
DataFrames.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>results_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to experimental results.</p></li>
<li><p><strong>results</strong> (<em>pandas.DataFrame</em><em>, </em><em>optional</em>) – Experimental results with X values matching the domain.</p></li>
<li><p><strong>domain_path</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>Path to experimental domain.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A domain_path or domain are required.</p>
</div>
</p></li>
<li><p><strong>domain</strong> (<em>pandas.DataFrame</em><em>, </em><em>optional</em>) – Experimental domain specified as a matrix of possible configurations.</p></li>
<li><p><strong>exindex_path</strong> (<em>str</em><em>, </em><em>optional</em>) – Path to experiment results index if available.</p></li>
<li><p><strong>exindex</strong> (<em>pandas.DataFrame</em><em>, </em><em>optional</em>) – Experiment results index matching domain format. Used as lookup
table for simulations.</p></li>
<li><p><strong>bro.models</strong> (<em>model</em>) – Surrogate model object used for Bayesian optimization.
See bro.models for predefined models and specification of custom
models.</p></li>
<li><p><strong>acquisition_function</strong> (<em>str</em>) – Acquisition function used for for selecting a batch of domain
points to evaluate. Options: (TS) Thompson Sampling, (‘EI’)
Expected Improvement, (PI) Probability of Improvement, (UCB)
Upper Confidence Bound, (EI-TS) EI (first choice) + TS (n-1 choices),
(PI-TS) PI (first choice) + TS (n-1 choices), (UCB-TS) UCB (first
choice) + TS (n-1 choices), (MeanMax-TS) Mean maximization
(first choice) + TS (n-1 choices), (VarMax-TS) Variance
maximization (first choice) + TS (n-1 choices), (MeanMax)
Top predicted values, (VarMax) Variance maximization, (rand)
Random selection.</p></li>
<li><p><strong>init_method</strong> (<em>str</em>) – Strategy for selecting initial points for evaluation.
Options: (rand) Random selection, (pam) k-medoids algorithm,
(kmeans) k-means algorithm, (external) User define external data
read in as results.</p></li>
<li><p><strong>target</strong> (<em>str</em>) – Column label of optimization objective. If set to -1, the last
column of the DataFrame will be set as the target.</p></li>
<li><p><strong>batch_size</strong> (<em>int</em>) – Number of experiments selected via acquisition and initialization
functions.</p></li>
<li><p><strong>duplicate_experiments</strong> (<em>bool</em>) – Allow the acquisition function to select experiments already
present in results.</p></li>
<li><p><strong>gpu</strong> (<em>bool</em>) – Carry out GPyTorch computations on a GPU if available.</p></li>
<li><p><strong>fast_comp</strong> (<em>bool</em>) – Enable fast computation features for GPyTorch models.</p></li>
<li><p><strong>noise_constraint</strong> (<em>float</em>) – Noise constraint for GPyTorch models.</p></li>
<li><p><strong>matern_nu</strong> (<em>0.5</em><em>, </em><em>1.5</em><em>, </em><em>2.5</em>) – Parameter value for model Matern kernel.</p></li>
<li><p><strong>lengthscale_prior</strong> (<em>[</em><em>gytorch.prior</em><em>, </em><em>initial_value</em><em>]</em>) – Specify a prior over GP length scale prameters.</p></li>
<li><p><strong>outputscale_prior</strong> (<em>[</em><em>gytorch.prior</em><em>, </em><em>initial_value</em><em>]</em>) – Specify a prior over GP output scale prameter.</p></li>
<li><p><strong>noise_prior</strong> (<em>[</em><em>gytorch.prior</em><em>, </em><em>initial_value</em><em>]</em>) – Specify a prior over GP noice prameter.</p></li>
<li><p><strong>computational_objective</strong> (<em>function</em><em>, </em><em>optional</em>) – Function to be optimized for computational objectives.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bro.BO.init_sample">
<code class="sig-name descname">init_sample</code><span class="sig-paren">(</span><em class="sig-param">seed=None</em>, <em class="sig-param">append=False</em>, <em class="sig-param">export_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.init_sample" title="Permalink to this definition">¶</a></dt>
<dd><p>Generate initial samples via an initialization method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>seed</strong> (<em>None</em><em>, </em><em>int</em>) – Random seed used for selecting initial points.</p></li>
<li><p><strong>append</strong> (<em>bool</em>) – Append points to results if computational objective or experiment
index are available.</p></li>
<li><p><strong>export_path</strong> (<em>str</em>) – Path to export SVG of clustering results if pam or kmeans methods
are used for selecting initial points.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Domain points for proposed experiments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bro.BO.run">
<code class="sig-name descname">run</code><span class="sig-paren">(</span><em class="sig-param">append=False</em>, <em class="sig-param">n_restarts=0</em>, <em class="sig-param">learning_rate=0.1</em>, <em class="sig-param">training_iters=100</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run a single iteration of optimization with known results.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use run for human-in-the-loop optimization.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<em>bool</em>) – Append points to results if computational objective or experiment
index are available.</p></li>
<li><p><strong>n_restarts</strong> (<em>int</em>) – Number of restarts used when optimizing GPyTorch model parameters.</p></li>
<li><p><strong>learning_rate</strong> (<em>float</em>) – ADAM learning rate used when optimizing GPyTorch model parameters.</p></li>
<li><p><strong>training_iters</strong> (<em>int</em>) – Number of iterations to run ADAM when optimizin GPyTorch models
parameters.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Domain points for proposed experiments.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bro.BO.simulate">
<code class="sig-name descname">simulate</code><span class="sig-paren">(</span><em class="sig-param">iterations=1</em>, <em class="sig-param">seed=None</em>, <em class="sig-param">fast_comp=False</em>, <em class="sig-param">update_priors=False</em>, <em class="sig-param">n_restarts=0</em>, <em class="sig-param">learning_rate=0.1</em>, <em class="sig-param">training_iters=100</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.simulate" title="Permalink to this definition">¶</a></dt>
<dd><p>Run autonomous BO loop.</p>
<p>Run N iterations of optimization with initial results obtained
via initialization method and experiments selected from
experiment index via the acquisition function. Simulations
require know objectives via an index of results or function.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Requires a computational objective or experiment index.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>append</strong> (<em>bool</em>) – Append points to results if computational objective or experiment
index are available.</p></li>
<li><p><strong>n_restarts</strong> (<em>int</em>) – Number of restarts used when optimizing GPyTorch model parameters.</p></li>
<li><p><strong>learning_rate</strong> (<em>float</em>) – ADAM learning rate used when optimizing GPyTorch model parameters.</p></li>
<li><p><strong>training_iters</strong> (<em>int</em>) – Number of iterations to run ADAM when optimizin GPyTorch models
parameters.</p></li>
<li><p><strong>seed</strong> (<em>None</em><em>, </em><em>int</em>) – Random seed used for initialization.</p></li>
<li><p><strong>fast_comp</strong> (<em>bool</em><em>, </em><em>int</em>) – Use gpytorch fast computation features. Integers specify a
threshold number of results above which fast computation will
be used.</p></li>
<li><p><strong>update_priors</strong> (<em>bool</em>) – Use parameter estimates from optimization step N-1 as initial
values for step N.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bro.BO.clear_results">
<code class="sig-name descname">clear_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.clear_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Clear results manually.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>‘rand’ and ‘pam’ initialization methods clear results automatically.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="bro.BO.plot_convergence">
<code class="sig-name descname">plot_convergence</code><span class="sig-paren">(</span><em class="sig-param">export_path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.plot_convergence" title="Permalink to this definition">¶</a></dt>
<dd><p>Plot optimizer convergence.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>export_path</strong> (<em>None</em><em>, </em><em>str</em>) – Path to export SVG of optimizer optimizer convergence plot.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Plot of optimizer convergence.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>matplotlib.pyplot</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="bro.BO.acquisition_summary">
<code class="sig-name descname">acquisition_summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bro.BO.acquisition_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Summarize predicted mean and variance for porposed points.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Summary table.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="objective.html" class="btn btn-neutral float-right" title="Optimization Objective" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="Bayesian Reaction Optimization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Benjamin J. Shields

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>